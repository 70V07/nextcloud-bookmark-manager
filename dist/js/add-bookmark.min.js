"use strict";const remote=require("electron").remote,ipc=require("electron").ipcRenderer,dialog=remote.dialog,Store=require("electron-store"),store=new Store,$=require("jquery");require("select2")($);const server=store.get("loginCredentials.server"),username=store.get("loginCredentials.username"),password=store.get("loginCredentials.password");var serialize=function(e){const o=[];for(let t in e)e.hasOwnProperty(t)&&o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return o.join("&")};function addBookmark(){let e=serialize({url:$('input[name="url"]').val(),title:$('input[name="title"]').val(),description:$('textarea[name="description"]').val()});const o=$("#tags").select2("data");for(var t=0;t<o.length;t++)e+="&item[tags][]="+encodeURIComponent(o[t].text);const r={method:"POST",headers:{Authorization:"Basic "+btoa(username+":"+password),"Content-Type":"application/json"},mode:"cors",cache:"default"};fetch(server+"/index.php/apps/bookmarks/public/rest/v2/bookmark?"+e,r).then(function(e){return e.ok?e.text():(dialog.showErrorBox("Add Bookmark Error","An error occured whilst trying to add the bookmark"),e.text())}).then(function(e){ipc.send("refresh","refresh"),closeModal()}).catch(function(e){console.log("ERROR"),console.log(e)})}function closeModal(){remote.getCurrentWindow().close()}$(document).ready(function(){$("#tags").select2({theme:"custom",width:"320px",tags:!0,tokenSeparators:[",",";"],data:store.get("tags")}),$("#cancel").click(function(){closeModal()}),$("#modal-form").submit(function(e){e.preventDefault(),addBookmark()})});
//# sourceMappingURL=maps/add-bookmark.min.js.map
