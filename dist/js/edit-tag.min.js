"use strict";const remote=require("electron").remote,ipc=require("electron").ipcRenderer,dialog=remote.dialog,Store=require("electron-store"),store=new Store,$=require("jquery"),urlParams=new URLSearchParams(location.search),server=store.get("loginCredentials.server"),username=store.get("loginCredentials.username"),password=store.get("loginCredentials.password"),theTag=urlParams.get("tag");var serialize=function(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};function populateForm(){$("header").append(theTag),$('input[name="old_name"]').val(theTag),$('input[name="new_name"]').attr("placeholder",theTag).attr("pattern","^(?!"+theTag+"$).*")}function updateTag(){$('input[name="new_name"]').val(),$('input[name="old_name"]').val();let e=serialize({old_name:$('input[name="old_name"]').val(),new_name:$('input[name="new_name"]').val()});const t={method:"POST",headers:{Authorization:"Basic "+btoa(username+":"+password),"Content-Type":"application/json"},mode:"cors",cache:"default"};fetch(server+"/index.php/apps/bookmarks/public/rest/v2/tag?"+e,t).then(function(e){return e.ok?e.text():(dialog.showErrorBox("Edit Tag Error","An error occured whilst trying to edit the tag"),closeModal(),e.text())}).then(function(e){ipc.send("refresh","refresh"),closeModal()}).catch(function(e){console.log("ERROR"),console.log(e)})}function closeModal(){remote.getCurrentWindow().close()}$(document).ready(function(){populateForm(),$("#cancel").click(function(){closeModal()}),$("#modal-form").submit(function(e){e.preventDefault(),updateTag()})});
//# sourceMappingURL=maps/edit-tag.min.js.map
